(()=>{"use strict";var e={619:(e,t,n)=>{n.r(t),n.d(t,{levels:()=>s,state:()=>l});const s=[{name:"easy",width:10,height:10},{name:"medium",width:15,height:15},{name:"hard",width:25,height:25}],l={level:s[0],sound:!0,theme:"light",bombcount:10,time:0,steps:0}}},t={};function n(s){var l=t[s];if(void 0!==l)return l.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");if(s.length)for(var l=s.length-1;l>-1&&!e;)e=s[l--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{function e(e=0,t=100){const n=t-e;let s=Math.random();return s=Math.floor(s*n),s+=e,s}var t=n(619);const{state:s}=n(619);function l(){const e=document.querySelector(".timer");e.value+=1,e.innerText=e.value.toString().padStart(3,"0")}let a;function c(){a=setInterval(l,1e3),document.querySelector(".field").removeEventListener("click",(()=>{c()}),{once:!0})}function o(){clearInterval(a);const e=document.querySelector(".timer");s.time=e.value,e.value=0,e.innerText=e.value.toString().padStart(3,"0")}function i(){document.querySelector(".field").addEventListener("click",(e=>{console.log(e.target.innerText),c()}),{once:!0})}function d(){const e=document.querySelector(".field");e.replaceChildren(),S();const n=document.querySelector(".counter");n.value=t.state.bombcount,n.innerText=n.value.toString().padStart(3,"0"),t.state.steps=0,e.removeEventListener("click",(e=>{t.state.steps+=1}))}function r(){confirm("You lose! Play again!")&&(d(),o(),i())}function m(){const e=document.querySelector(".timer");t.state.time=e.value,confirm(`You win! Your result is: \n\n        Bombs found: ${t.state.bombcount} \n\n        Time: ${t.state.time} \n\n        Steps: ${t.state.steps} \n\n        Play again!`)&&(o(),d(),i())}function u(e){if(t.state.sound){var n=document.createElement("audio");n.src=e,n.autoplay=!0,n.onended=function(){this.remove()},document.body.appendChild(n)}}const p=n.p+"d83df6d75c38e3d666782a91f28490e1.mp3",h=n.p+"44fa837f467410cb85bee6853e56edf3.mp3",v=n.p+"2edf7ac88422cc91cc41e37ddf08c014.mp3";class f{constructor(e,t){this.isBomb=e,this.coordinates=t}setCellValue(e){this.value=e}setType(){if(this.isBomb)return void this.setCellValue("ðŸ’£");const e=b(this.coordinates);let t=0;e.forEach((e=>{(1===e||e.isBomb)&&t++})),t&&this.setCellValue(t)}showCellValue(){this.cellElem.innerHTML=this.value||""}setFlag(e){this.isFlagged=e,this.cellElem.innerHTML=e?"ðŸš©":"",u(v);const t=document.querySelector(".counter");t.value>0&&(t.value-=1),t.innerText=t.value.toString().padStart(3,"0")}open(){this.isOpenned=!0,this.cellElem.classList.remove("cell-light"),this.cellElem.classList.remove("cell-dark"),this.cellElem.classList.add("cell-open"),this.showCellValue()}onCellClick(e=!1){if(this.isFlagged){this.setFlag(!1);const e=document.querySelector(".counter");return e.value+=2,void(e.innerText=e.value.toString().padStart(3,"0"))}if(this.value||this.isOpenned){if(this.value&&e||"number"==typeof this.value)this.open();else if(this.isBomb){u(y),E.forEach((e=>{e.forEach((e=>{e.isBomb&&e.open()}))})),o(),setTimeout(r,500);const e=document.querySelector(".replay");e.classList.remove("replay-smile"),e.classList.add("replay-dead")}}else this.open(),b(this.coordinates).forEach((e=>{e.isOpenned||e.onCellClick(!0)}));this.showCellValue()}createCellonField(e){const n=document.createElement("div");this.cellElem=n,n.classList.add("cell"),"light"==t.state.theme?n.classList.add("cell-light"):n.classList.add("cell-dark"),this.value&&n.classList.add(`cell-${this.value}`),this.cellElem.addEventListener("click",(()=>{this.onCellClick(),u(h);let e=0;L.forEach((t=>{t.isOpenned||(e+=1)})),0===e&&(setTimeout(m,500),u(p))})),this.cellElem.addEventListener("contextmenu",(e=>{e.preventDefault(),this.isFlagged?this.onCellClick():(this.setFlag(!0),u(v))})),e.append(n)}}const g=function(){const e=document.querySelector("body");e.classList.add("body");const n=document.createElement("main");e.append(n),n.classList.add("main-container");const s=document.createElement("h1");s.innerText="RSS Minesweeper",s.classList.add("title");const l=document.createElement("div");l.classList.add("gameContainer"),n.append(l);const a=document.createElement("div");a.classList.add("settings"),a.classList.add("hide");const c=document.createElement("div");c.classList.add("top"),c.classList.add("btn"),c.innerText="Settings";const o=document.createElement("div");o.classList.add("top"),o.classList.add("score"),o.innerText="Score";const i=document.createElement("div");i.classList.add("top-panel"),l.append(i),i.append(c),i.append(s),i.append(o);const d=document.createElement("div");d.classList.add("sound-check");const r=document.createElement("span");r.innerText="Sound";const m=document.createElement("label");m.classList.add("switch");const u=document.createElement("input");u.classList.add("optionsSwitch"),u.setAttribute("type","checkbox"),u.id="soundSet",u.checked=!0,m.append(u),d.append(r),d.append(m),a.append(d),l.append(a);const p=document.createElement("div");p.innerText="Appearence mode",p.classList.add("theme-check"),a.append(p),["light","dark"].forEach((e=>{const n=document.createElement("div");n.classList.add("theme");const s=document.createElement("input");s.setAttribute("type","radio"),s.id=e,s.name="theme",s.value=e;const l=document.createElement("label");l.innerText=e,l.setAttribute("for","theme"),n.append(s),n.append(l),p.append(n),e===t.state.theme&&(s.checked=!0)}));const h=document.createElement("div");h.innerText="Difficulty level",h.classList.add("level-check"),a.append(h),["easy","medium","hard"].forEach((e=>{const n=document.createElement("div");n.classList.add("level");const s=document.createElement("input");s.setAttribute("type","radio"),s.id=e,s.name="level",s.value=e;const l=document.createElement("label");l.innerText=e,e===t.state.level.name&&(s.checked=!0),l.setAttribute("for","level"),n.append(s),n.append(l),h.append(n)})),a.append(h);const v=document.createElement("div");v.classList.add("panel");const f=document.createElement("div");f.classList.add("counter"),f.value=t.state.bombcount,f.innerText=f.value.toString().padStart(3,"0");const g=document.createElement("div");g.classList.add("replay"),g.classList.add("replay-smile");const y=document.createElement("div");y.classList.add("timer"),y.value=0,y.innerText=y.value.toString().padStart(3,"0");const E=document.createElement("div");E.classList.add("bombs");const L=document.createElement("input");L.setAttribute("type","range"),L.name="bombs",L.id="bombs",L.value=10,L.setAttribute("min","1"),L.setAttribute("max","99");const b=document.createElement("label");b.setAttribute("for","bombs"),b.innerText="   Bombs",E.append(L),E.append(b),l.append(v),v.append(f),v.append(g),v.append(y),a.append(E);const S=document.createElement("div");S.classList.add("field"),10==t.state.level.height?S.classList.add("field-small"):15==t.state.level.height?S.classList.add("field-medium"):25==t.state.level.height&&S.classList.add("field-large");const T=[[e,"body"],[S,"field"],[v,"panel"],[l,"gameContainer"],[f,"counter"],[g,"replay"],[y,"timer"],[a,"settings"],[c,"btn"],[o,"score"]];T.forEach((e=>{e[0].classList.add("theme-change")})),"light"==t.state.theme?T.forEach((e=>{e[0].classList.add(`${e[1]}-light`)})):T.forEach((e=>{e[0].classList.add(`${e[1]}-dark`)})),l.append(S);const x=document.createElement("div");x.classList.add("bottom-panel");const q=document.createElement("span");q.id="steps",q.innerText=`Steps: ${t.state.steps}`;const k=document.createElement("span");return k.id="cellsOpen",k.innerText="Cells opened: 0",l.append(x),x.append(q),x.append(k),S}(),y=n.p+"4d68c7921087610fc2365ad0a3e6a6be.mp3";let E=[],L=[];function b(e){const{x:t,y:n}=e,s=E[n-1]?.[t],l=E[n-1]?.[t+1],a=E[n]?.[t+1],c=E[n+1]?.[t+1],o=E[n+1]?.[t],i=E[n+1]?.[t-1],d=E[n]?.[t-1],r=E[n-1]?.[t-1];return[s,l,a,c,o,i,d,r].filter((e=>void 0!==e))}function S(n=t.state.level.width,s=t.state.level.height,l=t.state.bombcount){E=Array.from({length:s},(()=>Array.from({length:n},(()=>0)))),function(t){let n=t;const s=E.length,l=E[0].length;for(;n;){const t=e(0,l-1),a=e(0,s-1);E[a][t]||(E[a][t]=1,n-=1)}}(l),L.length=0,E.forEach(((e,t)=>{e.forEach(((e,n)=>{const s=function(e,t){const n=new f(e,t);return n.setCellValue(),n.setType(),n.createCellonField(g),n}(Boolean(e),{x:n,y:t});E[t][n]=s,s.isBomb||L.push(s)}))}));const a=document.querySelector(".replay");a.classList.contains("replay-dead")&&(a.classList.remove("replay-dead"),a.classList.add("replay-smile"))}S(),function(){const e=document.querySelector(".btn"),n=document.querySelector(".settings");e.addEventListener("click",(()=>{e.classList.contains("btn-pressed")?(e.classList.remove("btn-pressed"),n.classList.add("hide")):(e.classList.add("btn-pressed"),n.classList.remove("hide"))}));const s=document.getElementById("soundSet");s.addEventListener("change",(()=>{s.checked?t.state.sound=!0:t.state.sound=!1})),document.getElementsByName("theme").forEach((e=>{e.addEventListener("change",(function(){t.state.theme=this.value,console.log(t.state),function(){const e=document.querySelectorAll(".cell"),n=document.querySelector("body"),s=document.querySelector(".field"),l=document.querySelector(".panel"),a=document.querySelector(".gameContainer"),c=document.querySelector(".counter"),o=document.querySelector(".replay"),i=document.querySelector(".timer"),d=document.querySelector(".score"),r=document.querySelector(".btn"),m=[[n,"body"],[s,"field"],[l,"panel"],[a,"gameContainer"],[c,"counter"],[o,"replay"],[i,"timer"],[document.querySelector(".settings"),"settings"],[r,"btn"],[d,"score"]];"light"===t.state.theme?(m.forEach((e=>{e[0].classList.add(`${e[1]}-light`),e[0].classList.remove(`${e[1]}-dark`)})),e.forEach((e=>{e.classList.add("cell-light"),e.classList.remove("cell-dark")}))):(m.forEach((e=>{e[0].classList.remove(`${e[1]}-light`),e[0].classList.add(`${e[1]}-dark`)})),e.forEach((e=>{e.classList.remove("cell-light"),e.classList.add("cell-dark")})))}()}))})),document.getElementsByName("level").forEach((e=>{e.addEventListener("change",(function(){t.levels.forEach((n=>{e.value==n.name&&(t.state.level=n,function(){const e=document.querySelector(".field");10==t.state.level.height?(e.classList.add("field-small"),e.classList.remove("field-large"),e.classList.remove("field-medium")):15==t.state.level.height?(e.classList.add("field-medium"),e.classList.remove("field-large"),e.classList.remove("field-small")):25==t.state.level.height&&(e.classList.add("field-large"),e.classList.remove("field-small"),e.classList.remove("field-medium")),e.replaceChildren(),S()}())})),o(),i()}))})),document.querySelector(".replay").addEventListener("click",(()=>{d(),o(),i()}));const l=document.getElementById("bombs");l.addEventListener("change",(()=>{t.state.bombcount=l.value,d(),o(),i()})),document.querySelector(".field").addEventListener("click",(e=>{t.state.steps+=1;let n=0;document.getElementById("steps").innerText=`Steps: ${t.state.steps}`,E.forEach((e=>{e.forEach((e=>{e.isOpenned&&(n+=1)}))})),console.log(E),document.getElementById("cellsOpen").innerText=`Cells opened: ${n}`})),i()}()})()})();